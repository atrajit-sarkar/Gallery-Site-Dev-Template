<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Repo Contents</title>
    <style>
        .dir:hover {
            cursor: pointer;
        }
        .folder-contents {
            margin-left: 20px;
        }
    </style>
</head>

<body>

    <h1>GitHub Repository Contents</h1>
    <div id="content-list"></div>

    <script>
        // Replace with your GitHub repository details
        const owner = 'atrajit-sarkar';
        const repo = 'Kotlin-Basics';
        const folderPath = ''; // Leave empty to fetch root, or specify folder path e.g. 'src'

        async function getRepoContents(path = '', parentElement = null) {
            const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                displayContents(data, parentElement);
            } catch (error) {
                console.error('Error fetching repo contents:', error);
            }
        }

        function displayContents(contents, parentElement) {
            const contentList = parentElement || document.getElementById('content-list');

            contents.forEach(item => {
                const listItem = document.createElement('div');
                listItem.innerHTML = `<strong>${item.name}</strong> (${item.type})`;

                if (item.type === 'dir') {
                    // Create an h3 for the folder name
                    const folderHeading = document.createElement('h3');
                    folderHeading.textContent = item.name;
                    folderHeading.classList.add('dir');
                    contentList.appendChild(folderHeading);

                    // Create a div to contain the folder's contents
                    const folderContents = document.createElement('div');
                    folderContents.classList.add('folder-contents');
                    contentList.appendChild(folderContents);

                    // Fetch and display the contents of the directory
                    getRepoContents(item.path, folderContents);
                } else if (item.type === 'file') {
                    // Add files directly to the parent element (or root)
                    listItem.classList.add('file');
                    contentList.appendChild(listItem);
                }
            });
        }

        // Load the root folder by default
        getRepoContents(folderPath);
    </script>

</body>

</html>
